---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Nav from '../../components/Nav.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Writing | Clawd ML Portfolio">
	<Nav />
	<main class="section-shell">
		<h1 class="text-4xl md:text-5xl">Writing</h1>
		<p class="mt-4 max-w-2xl text-mist">
			Notes on ML systems, visuals, and interactive storytelling.
		</p>
		<div class="mt-10 grid gap-6">
			{posts.map((post) => (
				<article class="glass-panel p-6">
					<p class="text-sm text-mist">{post.data.tags.join(' / ')}</p>
					<h2 class="mt-3 text-2xl text-glass">{post.data.title}</h2>
					<p class="mt-3 text-mist">{post.data.summary}</p>
					<a class="mt-4 inline-block text-sm text-glow" href={base + 'blog/' + post.slug + '/'}>Read post</a>
				</article>
			))}
		</div>
	</main>
	<Footer />
</BaseLayout>
